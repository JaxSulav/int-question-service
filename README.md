## GRPC Server for question service ##

### PROTOS ###

- Proto files are located inside protos directory.
- Whenever we want to connect to or create new rpc, we create protos here.
- Generating native code from protos is as easy as running: `$ cd protos && buf generate --error-format=json`.

### LIBS ###
- The codes generated by protoc compiler or buf generate are stored inside `libs/` directory.
- All the required native go codes are already inside libs folder.

### MODELS ###

- Migrations of models happens through `models/migrations/main.go`.
- The core CRUD methods of model data is handled `models/actions` which are leveraged by rpcs defined in `methods/` directory.

### SERVER ###
- Although this is a gRPC based project, we also provide the REST endpoints by using [grpc-gateway](https://github.com/grpc-ecosystem/grpc-gateway).

#### PORTS ####
- We handle gRPC HTTP2 calls through port `50052` and REST HTTP1.1 requests through port `8080`.
- Both ports are independent of each other.

#### AUTHENTICATION ####
- Grpc Authentication can be done through gRPC UnaryInterceptors.
- Api exposed by grpc-gateway are authenticated by http Interceptors/HandlerFunc.
- From both interceptors, we perform the rpc in `auth service grpc server` to authenticate the user.

## INSTALLATION

* (Optional) Install the protobuf compiler for your system, if you want to generate the native code yourself. Already generated code can be found under `libs` directory.

```
 $ export PATH="$PATH:$(go env GOPATH)/bin"
 $ go mod tidy -go=1.17`
 $ go install \
    github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-grpc-gateway \
    github.com/grpc-ecosystem/grpc-gateway/v2/protoc-gen-openapiv2 \
    google.golang.org/protobuf/cmd/protoc-gen-go \
    google.golang.org/grpc/cmd/protoc-gen-go-grpc
```

## LIBS GENERATION
* We use buf generator over protoc to generate native codes. Please refer [this](libs/README.md) for files generation process

## MIGRATIONS
```
 $ go run models/migrations/main.go
```

## RUNNING THE SERVER
```
 $ go run main.go
```
